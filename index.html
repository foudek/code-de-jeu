<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Loup-Garou Win Rate Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      padding: 20px;
    }
    input, button {
      padding: 8px;
      margin: 5px 0;
      width: 200px;
    }
    button {
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>

<h1>Calculateur de Win Rate – Loup-Garou</h1>

<label>Nombre total de joueurs</label><br>
<input type="number" id="players" value="8"><br>

<label>Nombre de loups</label><br>
<input type="number" id="wolves" value="2"><br>

<label>Joueurs à dévoilement</label><br>
<input type="number" id="revealed" value="4"><br>

<label>Nombre de parties simulées</label><br>
<input type="number" id="games" value="100"><br>

<button onclick="simulate()">Calculer</button>

<div class="result" id="result"></div>

<script>
function simulate() {
  const players = Number(playersInput.value);
  const wolves = Number(wolvesInput.value);
  const revealed = Number(revealedInput.value);
  const games = Number(gamesInput.value);

  let wolfWins = 0;
  let villageWins = 0;

  for (let g = 0; g < games; g++) {
    // Tirage des loups
    let roles = Array(players).fill("village");
    for (let i = 0; i < wolves; i++) roles[i] = "wolf";
    roles.sort(() => Math.random() - 0.5);

    // Tirage des dévoilements
    let revealedIndexes = [];
    while (revealedIndexes.length < revealed) {
      let r = Math.floor(Math.random() * players);
      if (!revealedIndexes.includes(r)) revealedIndexes.push(r);
    }

    let wolvesAlive = roles.filter(r => r === "wolf").length;
    let villagersAlive = players - wolvesAlive;

    // Loups dévoilés meurent immédiatement
    revealedIndexes.forEach(i => {
      if (roles[i] === "wolf") {
        wolvesAlive--;
      }
    });

    // Innocents dévoilés sont intouchables
    let untouchable = revealedIndexes.filter(i => roles[i] === "village").length;

    let killableVillagers = villagersAlive - untouchable;

    // Simulation simple
    if (wolvesAlive >= killableVillagers) {
      wolfWins++;
    } else {
      villageWins++;
    }
  }

  result.innerHTML = `
    <p>Victoire Loups : ${(wolfWins / games * 100).toFixed(1)}%</p>
    <p>Victoire Village : ${(villageWins / games * 100).toFixed(1)}%</p>
  `;
}

const playersInput = document.getElementById("players");
const wolvesInput = document.getElementById("wolves");
const revealedInput = document.getElementById("revealed");
const gamesInput = document.getElementById("games");
</script>

</body>
</html>
